<!DOCTYPE html>
<html>
<head>
    <title>Settings</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header>
            <h2>Settings</h2>
            <div class="header-actions">
                <button id="themeToggleBtn" class="theme-toggle-btn" title="Toggle Theme">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </button>
                <button id="closeBtn" class="close-btn" title="Close">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
        </header>
        <div class="form-group">
            <label for="pollingRate">Polling Rate (ms)</label>
            <input type="number" id="pollingRate" min="500" step="100" value="2000">
            <div class="help-text">How often to check for new apps/windows.</div>
        </div>

        <div class="form-group checkbox-group">
            <input type="checkbox" id="showWindowsOfHiddenApps">
            <label for="showWindowsOfHiddenApps">Show windows of hidden apps</label>
            <div class="help-text">Show open windows even if their app is hidden in the Apps list.</div>
        </div>

        <div class="form-group checkbox-group">
            <input type="checkbox" id="showUnmatchedWindows">
            <label for="showUnmatchedWindows">Show unmatched windows</label>
            <div class="help-text">Show windows that cannot be matched to any known app (e.g. background processes).</div>
        </div>

        <div class="section-divider"></div>
        
        <div class="hidden-windows-section">
            <h3>Hidden Windows</h3>
            <div id="hidden-list" class="hidden-list">
                <!-- Hidden items will be injected here -->
            </div>
        </div>

        <div class="section-divider"></div>

        <div class="hidden-windows-section">
            <h3>Hidden Apps</h3>
            <div id="hidden-apps-list" class="hidden-list">
                <!-- Hidden apps will be injected here -->
            </div>
        </div>

        <div class="status" id="status"></div>

        <div class="section-divider"></div>

        <div class="extras-section">
            <h3>Extras</h3>
            <button id="downloadScriptBtn" class="secondary-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                Download Packages Hider
            </button>
        </div>

        <div class="disclaimer">
            This extension operates entirely locally. No data is sent to external servers. All communication happens directly between your browser and the Overwolf client on your machine.
            <br><br>
            This extension is not affiliated with, endorsed by, or connected to Overwolf in any way.
            <br><br>
            Vibe Coded by Tsury, 2026
        </div>
    </div>
    <script src="popup.js"></script>

    <!-- Modal -->
    <div id="scriptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Packages Hider Script</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Since DevCools requires the original Overwolf Packages window to be open, we provide an optional AutoHotkey script to hide it from your taskbar and screen, keeping your workspace clean and preventing it from being injected into your games.</p>
                
                <h4>Features:</h4>
                <ul>
                    <li><strong>Hides the "Packages" window</strong> automatically.</li>
                    <li><strong>Toggle Visibility:</strong> Press <code>Win + Alt + H</code> to show/hide the window manually.</li>
                    <li><strong>Tray Icon:</strong> Shows the current status and allows toggling via menu.</li>
                </ul>

                <p style="font-size: 11px; color: var(--text-muted); margin-bottom: 15px; font-style: italic;">
                    <strong>Note:</strong> This script hides the entire browser window. If you have other tabs open alongside the Packages tab, they will also be hidden. You can use the hotkey to bring the window back into view, interact with it, and then hide it again.
                </p>

                <div class="warning-box">
                    <strong>Disclaimer:</strong> Executing scripts is at your own responsibility.
                    <br>
                    You can review the source code <a href="https://github.com/Tsury/ow-devcools/blob/main/extras/PackagesHider.ahk" target="_blank">here</a>.
                </div>

                <div class="modal-actions">
                    <a href="https://github.com/Tsury/ow-devcools/blob/main/extras/PackagesHider.exe?raw=true" class="download-btn-primary" target="_blank">Download .exe</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>